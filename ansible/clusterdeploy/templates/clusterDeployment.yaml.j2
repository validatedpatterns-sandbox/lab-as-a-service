---
apiVersion: hive.openshift.io/v1
kind: ClusterDeployment
metadata:
  name: {{ cluster.name }}
  namespace: {{ cluster.namespace }}
spec:
  baseDomain: {{ cluster.baseDomain }}
  clusterName: {{ cluster.name }}
  installAttemptsLimit: 1
  platform:
{% if cluster.cloud.provider == 'Google' %}
    gcp:
{% elif cluster.cloud.provider == 'Azure' %}
    azure:
      baseDomainResourceGroupName: {{ azure.baseDomainResourceGroupName }}
      cloudName: {{ azure.cloudName | default('AzurePublicCloud')}}
{% else %}
    aws:
{% endif %}
      region: {{ cluster.region }}
      credentialsSecretRef:
        name: {{ cluster.name }}-{{ cluster.cloud.provider |lower }}-credentials
  provisioning:
    installConfigSecretRef:
      name: {{ cluster.name }}-install-config
    imageSetRef:
      name: {{ cluster.version }}
  pullSecretRef:
    name: {{ cluster.name }}-pull-secret
